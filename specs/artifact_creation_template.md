# Artifact Creation Template

This template defines the structure for Power BI artifact creation findings reports. These reports are generated by the `/create-pbi-artifact` command and document the complete specification for new measures, calculated columns, tables, or visuals.

## Document Structure

### Problem Statement
[Clear description of the new artifact to be created and its business purpose]

---

## Section 1: Current Implementation Investigation

This section documents the existing data model context and specification for the new artifact(s).

### 1.0 Artifact Breakdown Plan

**Purpose:** Document all artifacts to be created and their dependency relationships (populated by powerbi-artifact-decomposer agent).

**Original Request:** [User's creation description]

**Artifact Analysis:**
- Primary Artifact Type: [Visual | Measure | Column | Table]
- Total Artifacts to Create: [N]
- Existing References: [M existing artifacts]
- Complexity: [Low | Medium | High]

#### Artifacts to Create

##### [N]. [Artifact Name] - [Artifact Type]
**Type:** [Helper Measure | Business Measure | Card Visual | Chart Visual | Calculated Column | Table]
**Purpose:** [Business purpose / Why this artifact is needed]
**Status:** CREATE | REFERENCE (existing)
**Priority:** [N] ([create first | depends on artifacts X, Y])
**Dependencies:**
- [Artifact or column name] (existing in model)
- [Artifact name] (from artifact #N above)
**Used By:**
- [Artifact name] (artifact #N below)
- [Report page/visual] (if applicable)

[Repeat for each artifact]

---

#### Dependency Graph

```
[ASCII representation showing artifact dependencies]

Example:
[Total Revenue PY] ──┐
                     ├──→ [YoY Revenue Growth %] ──→ [Sales Performance Card]
[Total Revenue] ─────┘
```

#### Creation Order
1. [Artifact name] - [Reason: no dependencies / create first]
2. [Artifact name] - [Reason: depends on #1]
3. [Artifact name] - [Reason: depends on #1 and #2]

**User Modifications:** [None | List of changes user requested to initial plan]

**Specification Status:** [CONFIRMED | IN PROGRESS]

---

### 1.1 Data Model Schema

**Purpose:** Document the existing data model structure relevant to the new artifact.

**Tables Identified:**

#### [Table Name] - [Fact | Dimension]
**Columns:**
- [Column Name] ([Data Type]) - [Description]
- [Column Name] ([Data Type]) - [Description]

**Relationships:**
- [Source Table][Column] → [Target Table][Column] (Cardinality: [1:Many | Many:1 | 1:1])

**Row Count:** [Approximate row count if available]

**Notes:** [Any relevant observations about the table]

---

### 1.2 Data Understanding & Artifact Specifications

**Purpose:** Document the iterative Q&A process and final specification decisions for each artifact.

**Total Artifacts:** [N from Section 1.0]

---

#### 1.2.[N]: [Artifact Name] - [Artifact Type]

**From Section 1.0:** Artifact #[N] | Priority: [N] | Dependencies: [list]

**Artifact Type:** [Measure | Calculated Column | Table | Visual]
**Artifact Name:** [Proposed name]
**Target Table/Location:** [Table where artifact will be created | Page for visual]

**Business Requirement:**
[Clear statement of what the artifact should accomplish]

**Data Sources Identified:**

1. **[Source Description]**
   - Source Table: [Table name]
   - Column: [Column name] ([data type])
   - Aggregation: [SUM | AVERAGE | COUNT | etc.]
   - Filter: [Any filters to apply]
   - Grain: [Row level | Table level | Report level]

**Data Validation Results:**

[If data sampling was performed]

Query Executed:
```dax
[DAX query that was run to sample data]
```

Sample Data Retrieved: [Number of rows]

Key Findings:
- [Observation about data structure]
- [Observation about data quality]
- [Observation about grain/cardinality]

**Business Logic Specification:**

1. **[Logic Component 1]**
   ```
   [Description of calculation or logic]
   ```

2. **[Logic Component 2]**
   ```
   [Description of calculation or logic]
   ```

3. **Edge Cases:**
   - [Edge case scenario]: [How to handle]
   - [Edge case scenario]: [How to handle]

**Column Treatment Decisions:**

| Column | Usage | Treatment | Reason |
|--------|-------|-----------|--------|
| [Column Name] | [Aggregate \| Filter \| Context \| Not Used] | [How it's used] | [Why this approach] |

**Styling & Formatting Decisions:**

| Aspect | Decision | Rationale |
|--------|----------|-----------|
| Format String | [Format pattern] | [Why this format] |
| Display Folder | [Folder path] | [Organizational logic] |
| Description | [Tooltip text] | [Purpose of description] |
| Conditional Formatting | [Rules if applicable] | [Visual feedback goals] |

**Questions Resolved:**
✅ [Question asked and answer confirmed]
✅ [Question asked and answer confirmed]
⚠️ [Question asked, user corrected recommendation]

**Recommendations Accepted/Corrected:**

| Aspect | Recommended | User Decision | Final |
|--------|-------------|---------------|-------|
| [Decision point] | [Agent recommendation] | ✓ Accepted / ✗ Corrected | [Final decision] |

**Specification Status:** [COMPLETE | IN PROGRESS] - Ready for [pattern discovery | implementation design]

---

**[Repeat subsection 1.2.N for each artifact from Section 1.0]**

---

### 1.3 Pattern Discovery

**Purpose:** Document existing patterns that the new artifacts should follow.

**Patterns organized by artifact type:**

**Similar Artifacts Found:**

1. **[Artifact Name]**
   Location: [filename.tmdl](path/to/file.tmdl)
   Pattern Used: [Description of pattern]
   ```dax
   [Code snippet showing the pattern]
   ```

   **Similarity:** [How this relates to the new artifact]
   **Differences:** [What will be different]

**Naming Conventions Observed:**
- Prefix: [Pattern observed]
- Suffix: [Pattern observed]
- Format: [CamelCase | kebab-case | etc.]
- Special Characters: [Spaces, underscores, etc.]

**Calculation Patterns:**
- [Pattern type]: [How it's used in existing measures]
- [Pattern type]: [How it's used in existing measures]

**Styling Patterns:**
- Format Strings: [Common patterns observed]
- Display Folders: [Organizational structure]
- Descriptions: [Style and level of detail]

**Design System Patterns:** (if visual)
- Color Scheme: [Primary, secondary, accent colors]
- Font Family: [Standard font used]
- Layout Patterns: [Common layouts observed]

---

## Section 2: Proposed Changes

**Total Artifacts:** [N from Section 1.0]

**Creation Order:** [Follow order from Section 1.0]

---

### 2.[N]: [Artifact Name] - [Artifact Type]
**Change Type:** CREATE
**Priority:** [N from Section 1.0] ([create first | depends on 2.X, 2.Y])
**Target Location:** [filename.tmdl](path/to/file.tmdl)

**Proposed Code:**
```dax
[Complete DAX or M code for the new artifact]
```

**Styling & Metadata:**
- **Format String:** `"[format pattern]"` ([description of format])
- **Display Folder:** `"[folder path]"` ([organizational purpose])
- **Description:** `"[tooltip text]"` ([purpose of description])
- **Data Category:** [None | Email | WebURL | ImageURL | etc.]

**Visual Formatting:** (if applicable for visual artifacts)
- **Font:** [Family, Size, Weight, Color]
- **Background Color:** [Color specification]
- **Data Colors:** [Color scheme for data visualization]
- **Conditional Formatting:**
  - [Rule 1]: [Threshold and formatting]
  - [Rule 2]: [Threshold and formatting]
- **Border/Layout:** [Style specifications]

**Change Rationale:**
[Detailed explanation of implementation decisions including:]
- Why this approach was chosen
- How it follows existing patterns
- Performance considerations
- Edge case handling
- Styling decisions

**Dependencies:**
- Requires existing [measure/table/column name]
- Requires relationship: [relationship description]
- Requires [other dependency]

**Validation Notes:**
- [How edge cases are handled]
- [Why specific functions were chosen]
- [Performance implications]

---

**[Repeat subsection 2.N for each artifact from Section 1.0 in priority order]**

---

## Section 3: Test Cases and Impact Analysis

[This section will be populated during implementation and testing phases]

### Test Cases

#### Test Case 1: [Test Name]
**Objective:** [What this test verifies]

**Test Steps:**
1. [Step 1]
2. [Step 2]
3. [Step 3]

**Expected Result:** [What should happen]

**Actual Result:** [To be filled during testing]

---

### Impact Analysis

#### Performance Impact
[Assessment of how the new artifact affects query performance, refresh times, model size]

#### Downstream Dependencies
[Reports, visualizations, or other measures that will use this new artifact]

#### Data Integrity Considerations
[How the new artifact ensures data accuracy and consistency]

---

## Section 4: Implementation Notes

[This section will be populated by the implementation command]

### Prerequisites
- [Required setup before implementation]

### Implementation Order
1. [First step]
2. [Second step]
3. [etc.]

### Post-Implementation Validation
- [ ] [Validation checkpoint 1]
- [ ] [Validation checkpoint 2]
- [ ] [Validation checkpoint 3]

### Known Limitations
[Any limitations or constraints of the implementation]

### Future Enhancements
[Potential improvements to consider after initial implementation]
